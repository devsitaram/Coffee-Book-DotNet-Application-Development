@page "/counter"

<h1>Place Your Coffee Order</h1>

<div>
    <h2>Select Coffee</h2>
    <select @bind="selectedCoffee">
        @foreach (var coffee in coffeeTypes)
        {
            <option value="@coffee">@coffee</option>
        }
    </select>
</div>

<div>
    <h2>Select Add-ins</h2>
    @foreach (var addin in addIns)
    {
        <label>
            <input type="checkbox" @bind="selectedAddIns[addin]" /> @addin
        </label>
        <br />
    }
</div>

<button @onclick="PlaceOrder">Place Order</button>

@code {
    private List<string> coffeeTypes = new List<string> { "Cappuccino", "Espresso", /* Add more coffee types */ };
    private List<string> addIns = new List<string> { "Milk", "Sugar", /* Add more add-ins */ };

    private string selectedCoffee { get; set; }
    private Dictionary<string, bool> selectedAddIns = new Dictionary<string, bool>();

    [Inject]
    private OrderService orderService { get; set; }

    private async Task PlaceOrder()
    {
        var selectedAddInsList = selectedAddIns.Where(x => x.Value).Select(x => x.Key).ToList();
        var order = new CoffeesOrder { CoffeeType = selectedCoffee, AddIns = selectedAddInsList };

        await orderService.PlaceOrder(order);
        // Redirect or perform other actions after placing the order
    }
}